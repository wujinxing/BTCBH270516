var configurarUsuarios_=function(){var b,d,e,f;d=b=0;f=e="";this.publico={};this.publico.main=function(a){simpleScript.addTab({id:diccionario.tabs.T4,label:$(a).attr("title"),fnCallback:function(){f=$(a).data("sitemap");configurarUsuarios.getContenido()}})};this.publico.getContenido=function(){simpleAjax.send({dataType:"html",root:"usuarios/configurarUsuarios/",data:"&_siteMap="+f,fnCallback:function(a){$("#"+diccionario.tabs.T4+"_CONTAINER").html(a);configurarUsuarios.getGridUsuarios()}})};this.publico.getGridUsuarios= function(){var a=$("#"+diccionario.tabs.T4+"gridUsuariosx").dataTable({bProcessing:!0,bServerSide:!0,bDestroy:!0,sPaginationType:"bootstrap_full",sServerMethod:"POST",bPaginate:!0,iDisplayLength:10,aoColumns:[{sTitle:lang.generico.ULTIMOACCESO,sWidth:"10%",sClass:"center"},{sTitle:lang.generico.USUARIO,sWidth:"20%"},{sTitle:lang.generico.NOMBREAPELLIDO,sWidth:"20%"},{sTitle:lang.generico.ROLES,sWidth:"20%",bSortable:!1},{sTitle:lang.generico.ESTADO,sWidth:"7%",sClass:"center",bSortable:!1},{sTitle:lang.generico.ACCIONES, sWidth:"18%",sClass:"center",bSortable:!1}],aaSorting:[[0,"desc"]],sScrollY:"300px",sAjaxSource:"usuarios/configurarUsuarios/getUsuarios",fnDrawCallback:function(){$("#"+diccionario.tabs.T4+"gridUsuariosx_filter").find("input").attr("placeholder",lang.busqueda.T4).css("width","350px");simpleScript.enterSearch("#"+diccionario.tabs.T4+"gridUsuariosx",a);simpleScript.removeAttr.click({container:"#widget_"+diccionario.tabs.T4+"usuarios",typeElement:"button"})}});setup_widgets_desktop()};this.publico.getNuevoUsuario= function(a){simpleAjax.send({element:a,dataType:"html",root:"usuarios/configurarUsuarios/getNuevoUsuario",fnCallback:function(a){$("#cont-modal").append(a);$("#"+diccionario.tabs.T4+"formUsuario").modal("show")}})};this.publico.getEditUsuario=function(a,c){b=c;simpleAjax.send({element:a,dataType:"html",root:"usuarios/configurarUsuarios/getEditUsuario",data:"&_idUsuario="+b,fnCallback:function(a){$("#cont-modal").append(a);$("#"+diccionario.tabs.T4+"formUsuario").modal("show")}})};this.publico.getMensaje= function(a,c,g,h,b){simpleAjax.send({element:a,dataType:"html",root:"usuarios/configurarUsuarios/getViewMensaje",data:"&_nombres="+g+"&_idUsuario="+c+"&_mail="+h+"&_idioma="+b,fnCallback:function(a){$("#cont-modal").append(a);$("#"+diccionario.tabs.T4+"formViewMensaje").modal("show")}})};this.publico.getFormEmpleado=function(a,c,g,b){d=c;e=g;simpleAjax.send({element:a,dataType:"html",root:"usuarios/configurarUsuarios/getFormEmpleado",fnCallback:function(a){$("#cont-modal").append(a);$("#"+diccionario.tabs.T4+ "formBuscarEmpleado").modal("show");$("#"+diccionario.tabs.T4+"formBuscarEmpleado h4.modal-title").html(b)}})};this.publico.getEmpleados=function(){$("#"+diccionario.tabs.T4+"gridEmpleadosFound_filter").remove();$("#"+diccionario.tabs.T4+"gridEmpleadosFound").dataTable({bProcessing:!0,bServerSide:!0,bDestroy:!0,sServerMethod:"POST",bPaginate:!1,aoColumns:[{sTitle:lang.generico.NRO,sClass:"center",sWidth:"2%",bSortable:!1},{sTitle:lang.generico.NOMBREAPELLIDO,sWidth:"88%"}],aaSorting:[[1,"asc"]],sScrollY:"250px", sAjaxSource:"usuarios/configurarUsuarios/getEmpleados",fnServerParams:function(a){a.push({name:diccionario.tabs.T4+"_term",value:$("#"+diccionario.tabs.T4+"txt_search").val()});a.push({name:"_tab",value:d});a.push({name:"_rol",value:e})},fnDrawCallback:function(){$("#"+diccionario.tabs.T4+"gridEmpleadosFound_filter").remove();$("#"+diccionario.tabs.T4+"gridEmpleadosFound_wrapper").find(".dt-bottom-row").remove();$("#"+diccionario.tabs.T4+"gridEmpleadosFound_wrapper").find(".dataTables_scrollBody").css("overflow-x", "hidden");simpleScript.removeAttr.click({container:"#"+diccionario.tabs.T4+"gridEmpleadosFound",typeElement:"a"})}});$("#"+diccionario.tabs.T4+"gridEmpleadosFound_filter").remove()};this.publico.postNuevoUsuario=function(){simpleAjax.send({flag:1,element:"#"+diccionario.tabs.T4+"btnGrabaAccion",root:"usuarios/configurarUsuarios/postNuevoUsuario",form:"#"+diccionario.tabs.T4+"formUsuario",clear:!0,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)?isNaN(a.result)||2!==parseInt(a.result)|| simpleScript.notify.error({content:lang.usuario.VAL08}):simpleScript.notify.ok({content:lang.mensajes.MSG_3,callback:function(){simpleScript.reloadGrid("#"+diccionario.tabs.T4+"gridUsuariosx")}})}})};this.publico.postEditarUsuario=function(){simpleAjax.send({flag:3,element:"#"+diccionario.tabs.T4+"btnEditAccion",root:"usuarios/configurarUsuarios/postEditarUsuario",form:"#"+diccionario.tabs.T4+"formUsuario",data:"&_idUsuario="+b,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)?isNaN(a.result)|| 2!==parseInt(a.result)?isNaN(a.result)||3!==parseInt(a.result)||simpleScript.notify.error({content:lang.usuario.VAL02}):simpleScript.notify.error({content:lang.usuario.VAL01}):simpleScript.notify.ok({content:lang.mensajes.MSG_3,callback:function(){b=0;simpleScript.reloadGrid("#"+diccionario.tabs.T4+"gridUsuariosx");simpleScript.closeModal("#"+diccionario.tabs.T4+"formUsuario")}})}})};this.publico.postDeleteUsuario=function(a){var c=simpleScript.getParam(a);simpleScript.notify.confirm({content:lang.mensajes.MSG_5, callbackSI:function(){simpleAjax.send({flag:3,gifProcess:!0,data:"&_key="+c,root:"usuarios/configurarUsuarios/postDeleteUsuario",fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)||simpleScript.notify.ok({content:lang.mensajes.MSG_6,callback:function(){simpleScript.reloadGrid("#"+diccionario.tabs.T4+"gridUsuariosx")}})}})}})};this.publico.postPass=function(){window.history.pushState("data","Titulo","../../../");simpleAjax.send({flag:1,element:"#btnEntrar",root:"usuarios/configurarUsuarios/postPass", form:"#fromchange_pass",data:"&_idUsuario="+$("#txtIDUser").val()+"&_pass="+simpleAjax.stringPost($("#txtNewClave").val())+"&_usuario="+$("#txtUser").val(),fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)||(simpleScript.notify.ok({content:lang.mensajes.MSG_34}),simpleScript.redirect("index"))}})};this.publico.postAcceso=function(a,c,b){simpleAjax.send({element:"#"+diccionario.tabs.T4+"btnGrMensaje",form:"#"+diccionario.tabs.T4+"formViewMensaje",root:"usuarios/configurarUsuarios/postAcceso", data:"&_nombres="+c+"&_idUsuario="+a+"&_mail="+b,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)||simpleScript.notify.ok({content:lang.mensajes.MSG_15});simpleScript.reloadGrid("#"+diccionario.tabs.T4+"gridUsuariosx");simpleScript.closeModal("#"+diccionario.tabs.T4+"formViewMensaje")}})};this.publico.postBaja=function(a,b){simpleScript.notify.confirm({content:lang.mensajes.MSG_36,callbackSI:function(){simpleAjax.send({element:a,root:"usuarios/configurarUsuarios/postBaja",data:"&_idUsuario="+ b,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)||simpleScript.notify.ok({content:lang.mensajes.MSG_35,callback:function(){simpleScript.reloadGrid("#"+diccionario.tabs.T4+"gridUsuariosx")}})}})}})};return this.publico},configurarUsuarios=new configurarUsuarios_;