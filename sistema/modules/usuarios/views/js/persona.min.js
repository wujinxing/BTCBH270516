var persona_=function(){var c,d;c=0;d="";this.publico={};this.publico.main=function(a){simpleScript.addTab({id:diccionario.tabs.REPER,label:$(a).attr("title"),fnCallback:function(){d=$(a).data("sitemap");persona.getContenido()}})};this.publico.getContenido=function(){simpleAjax.send({dataType:"html",root:"usuarios/persona/",data:"&_siteMap="+d,fnCallback:function(a){$("#"+diccionario.tabs.REPER+"_CONTAINER").html(a);persona.getGridPersona()}})};this.publico.getGridPersona=function(){var a=$("#"+diccionario.tabs.REPER+ "gridPersona").dataTable({bProcessing:!0,bServerSide:!0,bDestroy:!0,sPaginationType:"bootstrap_full",sServerMethod:"POST",bPaginate:!0,iDisplayLength:10,aoColumns:[{sTitle:lang.generico.NRO,sWidth:"5%",sClass:"center"},{sTitle:lang.generico.FOTO,sWidth:"5%",bSortable:!1},{sTitle:lang.generico.NOMBREAPELLIDO,sWidth:"30%"},{sTitle:lang.generico.EMAIL,sWidth:"20%"},{sTitle:lang.generico.TELEFONO,sWidth:"10%"},{sTitle:lang.generico.PAIS,sWidth:"25%"},{sTitle:lang.generico.ESTADO,sWidth:"9%", sClass:"center",bSortable:!1},{sTitle:lang.generico.ACCIONES,sWidth:"15%",sClass:"center",bSortable:!1}],aaSorting:[[2,"asc"]],sScrollY:"300px",sAjaxSource:"usuarios/persona/getGridPersona",fnDrawCallback:function(){$("#"+diccionario.tabs.REPER+"gridPersona_filter").find("input").attr("placeholder",lang.busqueda.REPER).css("width","300px");simpleScript.enterSearch("#"+diccionario.tabs.REPER+"gridPersona",a);simpleScript.removeAttr.click({container:"#widget_"+diccionario.tabs.REPER,typeElement:"button, #"+ diccionario.tabs.REPER+"chk_all"})}});setup_widgets_desktop()};this.publico.getFormNewPersona=function(a){simpleAjax.send({element:a,dataType:"html",root:"usuarios/persona/getFormNewPersona",fnCallback:function(a){$("#cont-modal").append(a);$("#"+diccionario.tabs.REPER+"formNewPersona").modal("show")}})};this.publico.getDatosPersonales=function(a,b){simpleAjax.send({gifProcess:!0,dataType:"html",root:"usuarios/persona/getFormDatosPersonales",data:"&_idPersona="+a+"&_tt="+b,fnCallback:function(a){$("#cont-modal").append(a); $("#"+diccionario.tabs.REPER+"formDatosPersonales").modal("show")}})};this.publico.getFormEditPersona=function(a,b){c=b;simpleAjax.send({element:a,dataType:"html",gifProcess:!0,data:"&_idPersona="+c,root:"usuarios/persona/getFormEditPersona",fnCallback:function(a){$("#cont-modal").append(a);$("#"+diccionario.tabs.REPER+"formEditPersona").modal("show")}})};this.publico.postNewPersona=function(){simpleAjax.send({flag:1,element:"#"+diccionario.tabs.REPER+"btnGpersona",root:"usuarios/persona/postNewPersona", form:"#"+diccionario.tabs.REPER+"formNewPersona",clear:!0,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)?isNaN(a.result)||2!==parseInt(a.result)?isNaN(a.result)||3!==parseInt(a.result)||simpleScript.notify.error({content:lang.mensajes.MSG_22}):simpleScript.notify.error({content:lang.mensajes.MSG_23}):simpleScript.notify.ok({content:lang.mensajes.MSG_3,callback:function(){persona.getGridPersona();$("#"+diccionario.tabs.REPER+"lst_pais").select2("val","");$("#"+diccionario.tabs.REPER+ "lst_departamento").select2("val","");$("#"+diccionario.tabs.REPER+"lst_provincia").select2("val","");$("#"+diccionario.tabs.REPER+"lst_ubigeo").select2("val","")}})}})};this.publico.postEditarPersona=function(){simpleAjax.send({flag:2,element:"#"+diccionario.tabs.REPER+"btnEpersona",root:"usuarios/persona/postEditPersona",form:"#"+diccionario.tabs.REPER+"formEditPersona",data:"&_idPersona="+c,clear:!0,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)?isNaN(a.result)||2!==parseInt(a.result)? isNaN(a.result)||3!==parseInt(a.result)||simpleScript.notify.error({content:lang.mensajes.MSG_22}):simpleScript.notify.error({content:lang.mensajes.MSG_23}):simpleScript.notify.ok({content:lang.mensajes.MSG_3,callback:function(){c=0;simpleScript.reloadGrid("#"+diccionario.tabs.REPER+"gridPersona");simpleScript.closeModal("#"+diccionario.tabs.REPER+"formEditPersona")}})}})};this.publico.postDeletePersonaAll=function(a){simpleScript.validaCheckBox({id:"#"+diccionario.tabs.REPER+"gridPersona",msn:lang.mensajes.MSG_9, fnCallback:function(){simpleScript.notify.confirm({content:lang.mensajes.MSG_7,callbackSI:function(){simpleAjax.send({element:a,form:"#"+diccionario.tabs.REPER+"formGridPersona",root:"usuarios/persona/postDeletePersonaAll",fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)||simpleScript.notify.ok({content:lang.mensajes.MSG_8,callback:function(){persona.getGridPersona()}})}})}})}})};this.publico.postDesactivarPersona=function(a,b){simpleAjax.send({element:a,root:"usuarios/persona/postDesactivar", data:"&_idPersona="+b,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)||simpleScript.notify.ok({content:lang.mensajes.MSG_24,callback:function(){simpleScript.reloadGrid("#"+diccionario.tabs.REPER+"gridPersona")}})}})};this.publico.postActivarPersona=function(a,b){simpleAjax.send({element:a,root:"usuarios/persona/postActivar",data:"&_idPersona="+b,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)||simpleScript.notify.ok({content:lang.mensajes.MSG_25,callback:function(){simpleScript.reloadGrid("#"+ diccionario.tabs.REPER+"gridPersona")}})}})};return this.publico},persona=new persona_;