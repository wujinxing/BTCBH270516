var cajaApertura_=function(){var c,d;c=0;d="";this.publico={};this.publico.main=function(a){simpleScript.addTab({id:diccionario.tabs.CAJAA,label:$(a).attr("title"),fnCallback:function(){d=$(a).data("sitemap");cajaApertura.getContenido()}})};this.publico.getContenido=function(){simpleAjax.send({dataType:"html",root:"ventas/cajaApertura/",data:"&_siteMap="+d,fnCallback:function(a){$("#"+diccionario.tabs.CAJAA+"_CONTAINER").html(a);cajaApertura.getGridCajaApertura()}})};this.publico.getGridCajaApertura= function(){$("#"+diccionario.tabs.CAJAA+"gridCajaApertura").dataTable({bFilter:!1,bProcessing:!0,bServerSide:!0,bDestroy:!0,sPaginationType:"bootstrap_full",sServerMethod:"POST",bPaginate:!0,iDisplayLength:10,aoColumns:[{sTitle:lang.generico.ID,sWidth:"2%"},{sTitle:lang.generico.FECHAHORA,sWidth:"12%"},{sTitle:lang.generico.SUCURSAL,sWidth:"8%",sClass:"center"},{sTitle:lang.generico.MONEDA,sWidth:"5%",sClass:"center"},{sTitle:lang.generico.INICIAL,sWidth:"10%",sClass:"right"},{sTitle:lang.generico.INGRESOS, sWidth:"10%",sClass:"right"},{sTitle:lang.generico.EGRESOS,sWidth:"10%",sClass:"right"},{sTitle:lang.generico.SALDO,sWidth:"10%",sClass:"right"},{sTitle:lang.generico.ESTADO,sWidth:"10%",sClass:"center"},{sTitle:lang.generico.ACCIONES,sWidth:"5%",sClass:"center",bSortable:!1}],aaSorting:[[0,"desc"]],sScrollY:"350px",sAjaxSource:"ventas/cajaApertura/getGridCajaApertura",fnServerParams:function(a){a.push({name:"_fecha1",value:$("#"+diccionario.tabs.CAJAA+"txt_f1").val()});a.push({name:"_fecha2",value:$("#"+ diccionario.tabs.CAJAA+"txt_f2").val()});a.push({name:"_idSucursalGrid",value:$("#"+diccionario.tabs.CAJAA+"lst_sucursalGrid").val()})},fnDrawCallback:function(){simpleScript.removeAttr.click({container:"#widget_"+diccionario.tabs.CAJAA,typeElement:"button"})}});setup_widgets_desktop()};this.publico.getFormNewCajaApertura=function(a){simpleAjax.send({element:a,dataType:"html",root:"ventas/cajaApertura/getFormNewCajaApertura",fnCallback:function(a){$("#cont-modal").append(a);$("#"+diccionario.tabs.CAJAA+ "formNewCajaApertura").modal("show")}})};this.publico.getFormEditCajaApertura=function(a,b,d){c=b;simpleAjax.send({element:a,dataType:"html",root:"ventas/cajaApertura/getFormEditCajaApertura",data:"&_idCajaApertura="+c+"&_moneda="+d,fnCallback:function(a){$("#cont-modal").append(a);$("#"+diccionario.tabs.CAJAA+"formEditCajaApertura").modal("show")}})};this.publico.postNewCajaApertura=function(){simpleScript.notify.confirm({content:lang.mensajes.MSG_21,callbackSI:function(){simpleAjax.send({element:"#"+ diccionario.tabs.CAJAA+"btnGrCajaApertura",root:"ventas/cajaApertura/postNewCajaApertura",form:"#"+diccionario.tabs.CAJAA+"formNewCajaApertura",fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)?isNaN(a.result)||2!==parseInt(a.result)||simpleScript.notify.warning({content:"La Caja ya fue Aperturada, debe de cerrar Caja para volver a Aperturar."}):simpleScript.notify.ok({content:lang.mensajes.MSG_20,callback:function(){0<$("#"+diccionario.tabs.VGEVE+"_CONTAINER").length&&simpleScript.closeTab(diccionario.tabs.VGEVE); 0<$("#"+diccionario.tabs.VGEVE+"cotizacion_CONTAINER").length&&simpleScript.closeTab(diccionario.tabs.VGEVE+"cotizacion");0<$("#"+diccionario.tabs.VGEVE+"new_CONTAINER").length&&simpleScript.closeTab(diccionario.tabs.VGEVE+"new");0<$("#"+diccionario.tabs.VGEVE+"edit_CONTAINER").length&&simpleScript.closeTab(diccionario.tabs.VGEVE+"edit");0<$("#"+diccionario.tabs.VSEVE+"_CONTAINER").length&&simpleScript.closeTab(diccionario.tabs.VSEVE);0<$("#"+diccionario.tabs.VEGRE+"_CONTAINER").length&&simpleScript.closeTab(diccionario.tabs.VEGRE); simpleScript.reloadGrid("#"+diccionario.tabs.CAJAA+"gridCajaApertura");simpleScript.closeModal("#"+diccionario.tabs.CAJAA+"formNewCajaApertura")}})}})}})};this.publico.postEditCajaApertura=function(){simpleAjax.send({element:"#"+diccionario.tabs.CAJAA+"btnEdCajaApertura",root:"ventas/cajaApertura/postEditCajaApertura",form:"#"+diccionario.tabs.CAJAA+"formEditCajaApertura",data:"&_idCajaApertura="+c,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)||simpleScript.notify.ok({content:lang.mensajes.MSG_19, callback:function(){c=0;simpleScript.closeModal("#"+diccionario.tabs.CAJAA+"formEditCajaApertura");simpleScript.reloadGrid("#"+diccionario.tabs.CAJAA+"gridCajaApertura")}})}})};this.publico.getCaja=function(a){simpleAjax.send({gifProcess:!0,root:"ventas/cajaApertura/getDataCajaAllCombo",data:"&_idSucursalCombo="+a.idSucursal,fnCallback:function(b){simpleScript.listBox({data:b,optionSelec:!1,icon:!0,content:a.content,encript:!0,attr:{id:a.idElement,name:a.nameElement},dataView:{etiqueta:"descripcion", value:"id_caja"}})}})};this.publico.getCajaSaldo=function(a){simpleAjax.send({gifProcess:!0,root:"ventas/cajaApertura/getUltimoSaldoCombo",data:"&_idSucursalCombo="+a.idSucursal,fnCallback:function(b){b=b.saldo;isNaN(b)&&(b=0);$(a.idElement).val(parseFloat(b).toFixed(2))}})};return this.publico},cajaApertura=new cajaApertura_;