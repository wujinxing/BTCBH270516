var reporteGraficoMes_=function(){this.publico={};this.publico.main=function(c){simpleScript.addTab({id:diccionario.tabs.VRPT3,label:$(c).attr("title"),fnCallback:function(){reporteGraficoMes.getContenido()}})};this.publico.getContenido=function(){simpleAjax.send({dataType:"html",root:"ventas/reporteGraficoMes/",fnCallback:function(c){$("#"+diccionario.tabs.VRPT3+"_CONTAINER").html(c);reporteGraficoMes.getGraficoChk()}})};this.publico.getReporteGraficoMes=function(){var c={},f={},g,k=$("#"+diccionario.tabs.VRPT3+ "lst_periodo").val(),l=$("#"+diccionario.tabs.VRPT3+"lst_sucursalGrid").val(),m=$("#"+diccionario.tabs.VRPT3+"lst_mes").val();simpleAjax.send({root:"ventas/reporteGraficoMes/getGrafico",data:"&_periodo="+k+"&_idSucursalGrid="+l+"&_mes="+m,fnCallback:function(b){if(void 0!==b[0]){var a="[",d;for(d in b)c[d]=b[d].monto,f[d]=b[d].fecha,a+="{\n ",a+='    mes: "'+f[d]+'",\n ',a+="    monto: "+c[d]+",\n ",a+="}, ";g=b[0].sucursal;a=a.substring(0,a.length-1);b=eval(a+"]");AmCharts.makeChart(diccionario.tabs.VRPT3+ "chartdiv",{type:"serial",theme:"light",titles:[{text:"Saldo de caja de "+simpleScript.nombreMes(m)+" del "+k+" - SEVEND ["+g+"]",size:20}],marginRight:70,dataProvider:b,valueAxes:[{axisAlpha:0,position:"left",title:"Ganancia"}],startDuration:1,graphs:[{balloonText:"<span style='font-size:14px'>[[category]]: <b>S/ [[value]]</b></span>",bullet:"round",bulletSize:8,lineColor:"#901D78",lineThickness:2,negativeLineColor:"#FF0F00",type:"smoothedLine",valueField:"monto"}],depth3D:20,angle:30,chartCursor:{categoryBalloonDateFormat:"YYYY", cursorAlpha:0,valueLineEnabled:!0,valueLineBalloonEnabled:!0,valueLineAlpha:.5,fullWidth:!0},categoryField:"mes",categoryAxis:{gridPosition:"start",labelRotation:45},exportConfig:{menuTop:"10px",menuBottom:"auto",menuRight:"15px",backgroundColor:"#efefef",menuItemOutput:{fileName:"Reporte grafico SEVEND"},menuItemStyle:{backgroundColor:"#F1B8E6",rollOverBackgroundColor:"#D93CB9"},menuItems:[{textAlign:"center",icon:"public/js/amcharts/images/export.png",iconTitle:"Guardar como imagen",format:"jpg"}]}})}else simpleScript.notify.warning({content:lang.mensajes.MSG_47})}})}; this.publico.getReporteGraficoMesBarras=function(){var c={},f={},g,k="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74".split(" "),l=$("#"+diccionario.tabs.VRPT3+"lst_periodo").val(),m=$("#"+diccionario.tabs.VRPT3+"lst_sucursalGrid").val(),b=$("#"+diccionario.tabs.VRPT3+"lst_mes").val();simpleAjax.send({root:"ventas/reporteGraficoMes/getGrafico",data:"&_periodo="+l+"&_idSucursalGrid="+m+"&_mes="+b,fnCallback:function(a){if(void 0!==a[0]){var d,b,e="["; b=1;for(var h in a)c[h]=a[h].monto,f[h]=a[h].fecha,d=k[b],b++,12==b&&(b=1),e+="{\n ",e+='    mes: "'+f[h]+'",\n ',e+="    monto: "+c[h]+",\n ",e+='    color: "'+d+'"\n ',e+="}, ";g=a[0].sucursal;e=e.substring(0,e.length-1);a=eval(e+"]");AmCharts.makeChart(diccionario.tabs.VRPT3+"chartdiv",{type:"serial",theme:"light",titles:[{text:"Ganancia mensual del periodo: "+l+" - SEVEND ["+g+"]",size:20}],marginRight:70,dataProvider:a,valueAxes:[{axisAlpha:0,position:"left",title:"Ganancia"}],startDuration:1, graphs:[{balloonText:"<span style='font-size:14px'>[[category]]: <b>S/ [[value]]</b></span>",fillColorsField:"color",fillAlphas:.9,lineAlpha:.1,type:"column",valueField:"monto"}],depth3D:20,angle:30,chartCursor:{categoryBalloonDateFormat:"YYYY",cursorAlpha:0,valueLineEnabled:!0,valueLineBalloonEnabled:!0,valueLineAlpha:.5,fullWidth:!0},categoryField:"mes",categoryAxis:{gridPosition:"start",labelRotation:45},exportConfig:{menuTop:"10px",menuBottom:"auto",menuRight:"15px",backgroundColor:"#efefef", menuItemOutput:{fileName:"Reporte grafico SEVEND"},menuItemStyle:{backgroundColor:"#F1B8E6",rollOverBackgroundColor:"#D93CB9"},menuItems:[{textAlign:"center",icon:"public/js/amcharts/images/export.png",iconTitle:"Guardar como imagen",format:"jpg"}]}})}}})};this.publico.getGraficoChk=function(){$("#"+diccionario.tabs.VRPT3+"chk_graf").is(":checked")?reporteGraficoMes.getReporteGraficoMesBarras():reporteGraficoMes.getReporteGraficoMes()};this.publico.postPDF=function(){var c=$("#"+diccionario.tabs.VRPT3+ "lst_periodo").val(),f=$("#"+diccionario.tabs.VRPT3+"lst_sucursalGrid").val(),g=$("#"+diccionario.tabs.VRPT3+"lst_mes").val();simpleAjax.send({gifProcess:!0,root:"ventas/reporteGraficoMes/postPDF",data:"&_periodo="+c+"&_idSucursalGrid="+f+"&_mes="+g,fnCallback:function(c){1===parseInt(c.result)&&($("#"+diccionario.tabs.VRPT3+"btnDowPDF").off("click"),$("#"+diccionario.tabs.VRPT3+"btnDowPDF").attr("onclick","window.open('public/files/"+c.archivo+"','_blank');"),$("#"+diccionario.tabs.VRPT3+"btnDowPDF").click())}})}; return this.publico},reporteGraficoMes=new reporteGraficoMes_;