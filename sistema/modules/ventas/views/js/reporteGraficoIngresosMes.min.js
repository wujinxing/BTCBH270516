var reporteGraficoIngresosMes_=function(){var g;g="";this.publico={};this.publico.main=function(d){simpleScript.addTab({id:diccionario.tabs.VRPT6,label:$(d).attr("title"),fnCallback:function(){g=$(d).data("sitemap");reporteGraficoIngresosMes.getContenido()}})};this.publico.getContenido=function(){simpleAjax.send({dataType:"html",root:"ventas/reporteGraficoIngresosMes/",data:"&_siteMap="+g,fnCallback:function(d){$("#"+diccionario.tabs.VRPT6+"_CONTAINER").html(d);reporteGraficoIngresosMes.getGraficoChk()}})}; this.publico.getReporteGrafico=function(){var d="Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),f={},k={},p,g="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74".split(" "),l=$("#"+diccionario.tabs.VRPT6+"lst_periodo").val(),n=$("#"+diccionario.tabs.VRPT6+"lst_sucursalGrid").val();simpleAjax.send({root:"ventas/reporteGraficoIngresosMes/getGrafico",data:"&_periodo="+l+"&_idSucursalGrid="+n,fnCallback:function(c){p= c[0].sucursal;for(var b in c)f[b]=c[b].monto,k[b]=c[b].mes;for(var m=c="",h=0,a="[",e=0;12>e;e++){h=0;m=d[e];c=g[e];for(b in f)e+1==k[b]&&(h=f[b]);a+="{\n ";a+='    mes: "'+m+'",\n ';a+="    monto: "+h+",\n ";a+='    color: "'+c+'"\n ';a+="}, "}a=a.substring(0,a.length-1);b=eval(a+"]");AmCharts.makeChart(diccionario.tabs.VRPT6+"chartdiv",{type:"serial",theme:"light",titles:[{text:"Ventas mensuales del periodo: "+l+" - SEVEND ["+p+"]",size:20}],marginRight:70,dataProvider:b,valueAxes:[{axisAlpha:0, position:"left",title:"Ingresos"}],startDuration:1,graphs:[{balloonText:"<span style='font-size:14px'>[[category]]: <b>S/ [[value]]</b></span>",bullet:"round",bulletSize:8,lineColor:"#901D78",lineThickness:2,negativeLineColor:"#FF0F00",type:"smoothedLine",valueField:"monto"}],depth3D:20,angle:30,chartCursor:{categoryBalloonDateFormat:"YYYY",cursorAlpha:0,valueLineEnabled:!0,valueLineBalloonEnabled:!0,valueLineAlpha:.5,fullWidth:!0},categoryField:"mes",categoryAxis:{gridPosition:"start",labelRotation:45}, exportConfig:{menuTop:"10px",menuBottom:"auto",menuRight:"15px",backgroundColor:"#efefef",menuItemOutput:{fileName:"Reporte grafico Ingresos SEVEND"},menuItemStyle:{backgroundColor:"#F1B8E6",rollOverBackgroundColor:"#D93CB9"},menuItems:[{textAlign:"center",icon:"public/js/amcharts/images/export.png",iconTitle:"Guardar como imagen",format:"jpg"}]}})}})};this.publico.getReporteGraficoBarras=function(){var d="Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "), f={},k={},g,q="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74".split(" "),l=$("#"+diccionario.tabs.VRPT6+"lst_periodo").val(),n=$("#"+diccionario.tabs.VRPT6+"lst_sucursalGrid").val();simpleAjax.send({root:"ventas/reporteGraficoIngresosMes/getGrafico",data:"&_periodo="+l+"&_idSucursalGrid="+n,fnCallback:function(c){g=c[0].sucursal;for(var b in c)f[b]=c[b].monto,k[b]=c[b].mes;for(var m=c="",h=0,a="[",e=0;12>e;e++){h=0;m=d[e];c=q[e];for(b in f)e+1==k[b]&& (h=f[b]);a+="{\n ";a+='    mes: "'+m+'",\n ';a+="    monto: "+h+",\n ";a+='    color: "'+c+'"\n ';a+="}, "}a=a.substring(0,a.length-1);b=eval(a+"]");AmCharts.makeChart(diccionario.tabs.VRPT6+"chartdiv",{type:"serial",theme:"light",titles:[{text:"Ingresos mensuales del periodo: "+l+" - SEVEND ["+g+"]",size:20}],marginRight:70,dataProvider:b,valueAxes:[{axisAlpha:0,position:"left",title:"Ingresos"}],startDuration:1,graphs:[{balloonText:"<span style='font-size:14px'>[[category]]: <b>S/ [[value]]</b></span>", fillColorsField:"color",fillAlphas:.9,lineAlpha:.1,type:"column",valueField:"monto"}],depth3D:20,angle:30,chartCursor:{categoryBalloonDateFormat:"YYYY",cursorAlpha:0,valueLineEnabled:!0,valueLineBalloonEnabled:!0,valueLineAlpha:.5,fullWidth:!0},categoryField:"mes",categoryAxis:{gridPosition:"start",labelRotation:45},exportConfig:{menuTop:"10px",menuBottom:"auto",menuRight:"15px",backgroundColor:"#efefef",menuItemOutput:{fileName:"Reporte grafico Ingresos SEVEND"},menuItemStyle:{backgroundColor:"#F1B8E6", rollOverBackgroundColor:"#D93CB9"},menuItems:[{textAlign:"center",icon:"public/js/amcharts/images/export.png",iconTitle:"Guardar como imagen",format:"jpg"}]}})}})};this.publico.getGraficoChk=function(){$("#"+diccionario.tabs.VRPT6+"chk_graf").is(":checked")?reporteGraficoIngresosMes.getReporteGraficoBarras():reporteGraficoIngresosMes.getReporteGrafico()};this.publico.postPDF=function(){var d=$("#"+diccionario.tabs.VRPT6+"lst_periodo").val(),f=$("#"+diccionario.tabs.VRPT6+"lst_sucursalGrid").val(); simpleAjax.send({gifProcess:!0,root:"ventas/reporteGraficoIngresosMes/postPDF",data:"&_periodo="+d+"&_idSucursalGrid="+f,fnCallback:function(d){1===parseInt(d.result)&&($("#"+diccionario.tabs.VRPT6+"btnDowPDF").off("click"),$("#"+diccionario.tabs.VRPT6+"btnDowPDF").attr("onclick","window.open('public/files/"+d.archivo+"','_blank');"),$("#"+diccionario.tabs.VRPT6+"btnDowPDF").click())}})};return this.publico},reporteGraficoIngresosMes=new reporteGraficoIngresosMes_;