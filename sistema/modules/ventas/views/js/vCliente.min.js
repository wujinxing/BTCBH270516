var vCliente_=function(){var d,g,e,h,f;d=0;h=e=g="";f=null;this.publico={};this.publico.main=function(b){simpleScript.addTab({id:diccionario.tabs.VRECL,label:$(b).attr("title"),fnCallback:function(){g=$(b).data("sitemap");vCliente.getContenido()}})};this.publico.getContenido=function(){simpleAjax.send({dataType:"html",root:"ventas/vCliente/",data:"&_siteMap="+g,fnCallback:function(b){$("#"+diccionario.tabs.VRECL+"_CONTAINER").html(b);vCliente.getGridVcliente()}})};this.publico.getGridVcliente=function(){var b= $("#"+diccionario.tabs.VRECL+"gridVcliente").dataTable({bProcessing:!0,bServerSide:!0,bDestroy:!0,sPaginationType:"bootstrap_full",sServerMethod:"POST",bPaginate:!0,iDisplayLength:10,aoColumns:[{sTitle:lang.generico.NRO,sWidth:"3%",sClass:"center"},{sTitle:lang.generico.CLIENTE,sWidth:"30%"},{sTitle:lang.generico.TELEFONO,sWidth:"25%"},{sTitle:lang.generico.CIUDAD,sWidth:"20%"},{sTitle:lang.generico.ESTADO,sWidth:"8%",sClass:"center",bSortable:!1},{sTitle:lang.generico.ACCIONES,sWidth:"15%",sClass:"center", bSortable:!1}],aaSorting:[[0,"desc"]],sScrollY:"350px",sAjaxSource:"ventas/vCliente/getGridVcliente",fnDrawCallback:function(){$("#"+diccionario.tabs.VRECL+"gridVcliente_filter").find("input").attr("placeholder",lang.busqueda.VRECL).css("width","300px");simpleScript.enterSearch("#"+diccionario.tabs.VRECL+"gridVcliente",b);simpleScript.removeAttr.click({container:"#widget_"+diccionario.tabs.VRECL,typeElement:"button"})}});setup_widgets_desktop()};this.publico.getFormNewVcliente=function(b,c){f=c;simpleAjax.send({element:b, dataType:"html",root:"ventas/vCliente/getFormNewVcliente",fnCallback:function(a){$("#cont-modal").append(a);$("#"+diccionario.tabs.VRECL+"formNewVcliente").modal("show")}})};this.publico.getFormEditVcliente=function(b,c){d=c;simpleAjax.send({element:b,dataType:"html",root:"ventas/vCliente/getFormEditVcliente",data:"&_idPersona="+d,fnCallback:function(a){$("#cont-modal").append(a);$("#"+diccionario.tabs.VRECL+"formEditVcliente").modal("show")}})};this.publico.postNewVcliente=function(){var b=$("#"+ diccionario.tabs.VRECL+"txt_nombres").val(),c=$("#"+diccionario.tabs.VRECL+"txt_empresa").val();""==b&&""==c?simpleScript.notify.warning({content:"Debe de ingresar la empresa o el nombre del Cliente"}):simpleAjax.send({element:"#"+diccionario.tabs.VRECL+"btnGrVcliente",root:"ventas/vCliente/postNewVcliente",form:"#"+diccionario.tabs.VRECL+"formNewVcliente",fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)?isNaN(a.result)||2!==parseInt(a.result)?isNaN(a.result)||3!==parseInt(a.result)|| simpleScript.notify.error({content:"La empresa que ingreso, ya se encuentra registrada en el sistema."}):simpleScript.notify.error({content:"Nro de Documento ya existe."}):simpleScript.notify.ok({content:lang.mensajes.MSG_3,callback:function(){0<f.length&&(0<$("#"+diccionario.tabs.VGEVE+"_CONTAINER").length&&($("#"+diccionario.tabs.VGEVE+"txt_idpersona").val(simpleAjax.stringPost(a.idPersona)),$("#"+diccionario.tabs.VGEVE+"txt_cliente").val(a.nombre)),0<$("#"+diccionario.tabs.VCOTI+"_CONTAINER").length&& ($("#"+diccionario.tabs.VCOTI+"txt_idpersona").val(simpleAjax.stringPost(a.idPersona)),$("#"+diccionario.tabs.VCOTI+"txt_cliente").val(a.nombre)),simpleScript.closeModal(f));0<$("#"+diccionario.tabs.VRECL+"_CONTAINER").length&&vCliente.getGridVcliente();simpleScript.closeModal("#"+diccionario.tabs.VRECL+"formNewVcliente")}})}})};this.publico.postEditVcliente=function(){var b=$("#"+diccionario.tabs.VRECL+"txt_nombres").val(),c=$("#"+diccionario.tabs.VRECL+"txt_empresa").val();""==b&&""==c?simpleScript.notify.warning({content:"Debe de ingresar la empresa o el nombre del Cliente"}): simpleAjax.send({element:"#"+diccionario.tabs.VRECL+"btnEdVcliente",root:"ventas/vCliente/postEditVcliente",form:"#"+diccionario.tabs.VRECL+"formEditVcliente",data:"&_idPersona="+d,clear:!0,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)?isNaN(a.result)||2!==parseInt(a.result)?isNaN(a.result)||3!==parseInt(a.result)||simpleScript.notify.error({content:"El Cliente que esta registrando ya existe. Debe de buscarlo y seleccionarlo."}):simpleScript.notify.error({content:"Nro de Documento ya existe."}): simpleScript.notify.ok({content:lang.mensajes.MSG_19,callback:function(){d=0;simpleScript.closeModal("#"+diccionario.tabs.VRECL+"formEditVcliente");simpleScript.reloadGrid("#"+diccionario.tabs.VRECL+"gridVcliente")}})}})};this.publico.postDeleteVcliente=function(b,c){simpleScript.notify.confirm({content:lang.mensajes.MSG_5,callbackSI:function(){simpleAjax.send({element:b,gifProcess:!0,data:"&_idPersona="+c,root:"ventas/vCliente/postDeleteVcliente",fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)|| simpleScript.notify.ok({content:lang.mensajes.MSG_6,callback:function(){simpleScript.reloadGrid("#"+diccionario.tabs.VRECL+"gridVcliente")}})}})}})};this.publico.postDesactivar=function(b,c){simpleAjax.send({element:b,root:"ventas/vCliente/postDesactivar",data:"&_idPersona="+c,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)||simpleScript.notify.ok({content:"Cliente se desactivo correctamente",callback:function(){simpleScript.reloadGrid("#"+diccionario.tabs.VRECL+"gridVcliente")}})}})}; this.publico.postActivar=function(b,c){simpleAjax.send({element:b,root:"ventas/vCliente/postActivar",data:"&_idPersona="+c,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)||simpleScript.notify.ok({content:"Cliente se activo correctamente",callback:function(){simpleScript.reloadGrid("#"+diccionario.tabs.VRECL+"gridVcliente")}})}})};this.publico.postPDFCarta=function(b,c){simpleAjax.send({element:b,root:"ventas/vCliente/postPDFCarta",data:"&_idPersona="+c,fnCallback:function(a){1===parseInt(a.result)&& ($("#"+diccionario.tabs.VRECL+"btnDowPDF").off("click"),$("#"+diccionario.tabs.VRECL+"btnDowPDF").attr("onclick","window.open('public/files/"+a.archivo+"','_blank');globalScript.deleteArchivo('"+a.archivo+"');"),$("#"+diccionario.tabs.VRECL+"btnDowPDF").click())}})};this.publico.getMensaje=function(b,c,a,k){simpleAjax.send({element:b,dataType:"html",root:"ventas/vCliente/getViewMensaje",data:"&_nombres="+a+"&_idPersona="+c+"&_mail="+k,fnCallback:function(a){$("#cont-modal").append(a);$("#"+diccionario.tabs.T4+ "formViewMensaje").modal("show")}})};this.publico.postEmail=function(b,c,a){simpleAjax.send({element:"#"+diccionario.tabs.T4+"btnGrMensaje",form:"#"+diccionario.tabs.T4+"formViewMensaje",root:"ventas/vCliente/postEmail",data:"&_nombres="+c+"&_idPersona="+b+"&_mail="+a,fnCallback:function(a){isNaN(a.result)||1!==parseInt(a.result)?isNaN(a.result)||2!==parseInt(a.result)||simpleScript.notify.error({content:"Ocurri\u00f3 un error con el env\u00edo de la Carta de Intenci\u00f3n."}):(simpleScript.notify.ok({content:"Carta de Intenci\u00f3n, se envi\u00f3 correctamente."}), globalScript.deleteArchivo(a.carta),simpleScript.reloadGrid("#"+diccionario.tabs.VRECL+"gridVcliente"));simpleScript.closeModal("#"+diccionario.tabs.T4+"formViewMensaje")}})};this.publico.getBuscarCliente=function(b,c,a){e=c;h=a;simpleAjax.send({element:b,dataType:"html",root:"ventas/vCliente/getFormBuscarCliente",data:"&_tab="+e+"&_funcionExterna"+a,fnCallback:function(a){$("#cont-modal").append(a);$("#"+c+"formBuscarCliente").modal("show");setTimeout(function(){vCliente.getGridBuscarCliente()}, 500);$("#"+c+"formBuscarCliente .scroll-form").css("height","auto")}})};this.publico.getGridBuscarCliente=function(){var b=e,c=h,a=$("#"+b+"gridClientesFound").dataTable({bFilter:!0,sSearch:!0,bProcessing:!0,bServerSide:!0,bDestroy:!0,sPaginationType:"bootstrap_full",sServerMethod:"POST",bPaginate:!0,iDisplayLength:10,aoColumns:[{sTitle:lang.generico.NRO,sWidth:"1%",bSortable:!1},{sTitle:lang.generico.CLIENTE,sWidth:"70%"},{sTitle:lang.generico.ACCIONES,sWidth:"10%",sClass:"center",bSortable:!1}], aaSorting:[[1,"asc"]],sScrollY:"200px",sAjaxSource:"ventas/vCliente/getBuscarCliente",fnServerParams:function(a){a.push({name:"_tab",value:b});a.push({name:"_funcionExterna",value:c})},fnDrawCallback:function(){$("#"+b+"gridClientesFound_filter").find("input").attr("placeholder","Buscar por Nombre o Empresa").css("width","300px").css("height","28px");simpleScript.enterSearch("#"+b+"gridClientesFound",a);simpleScript.removeAttr.click({container:"#"+b+"formBuscarCliente",typeElement:"button"});$("#"+ b+"gridClientesFound_info").css("margin-left","10px");$("#"+b+"gridClientesFound_wrapper .dataTables_paginate").css("margin-right","10px");$("#"+b+"gridClientesFound_refresh").css("padding","5px 10px")}});setup_widgets_desktop()};return this.publico},vCliente=new vCliente_;