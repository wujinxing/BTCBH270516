var configurarRoles_=function(){var t={};return t.mapaSitio="",t.config={modulo:"roles/configurarRoles/"},t.idRol=0,this.publico={},this.publico.main=function(o){simpleScript.addTab({id:diccionario.tabs.T1,label:$(o).attr("title"),fnCallback:function(){t.mapaSitio=$(o).data("sitemap"),configurarRoles.getContenido()}})},this.publico.getContenido=function(){simpleAjax.send({dataType:"html",root:t.config.modulo,data:"&_siteMap="+t.mapaSitio,fnCallback:function(t){$("#"+diccionario.tabs.T1+"_CONTAINER").html(t),configurarRoles.getGridRoles()}})},this.publico.getGridRoles=function(){var o=$("#"+diccionario.tabs.T1+"gridRoles").dataTable({bProcessing:!0,bServerSide:!0,bDestroy:!0,sPaginationType:"bootstrap_full",sServerMethod:"POST",bPaginate:!0,iDisplayLength:10,aoColumns:[{sTitle:"CÃ³digo",sClass:"center",sWidth:"10%"},{sTitle:"Rol",sWidth:"50%"},{sTitle:"Estado",sWidth:"10%",sClass:"center",bSortable:!1},{sTitle:"Acciones",sWidth:"15%",sClass:"center",bSortable:!1}],aaSorting:[[0,"asc"]],sScrollY:"300px",sAjaxSource:t.config.modulo+"getRoles",fnDrawCallback:function(){$("#"+diccionario.tabs.T1+"gridRoles_filter").find("input").attr("placeholder",lang.accion.BUSCAR).css("width","250px"),simpleScript.enterSearch("#"+diccionario.tabs.T1+"gridRoles",o),simpleScript.removeAttr.click({container:"#widget_"+diccionario.tabs.T1+"roles",typeElement:"button"})}});setup_widgets_desktop()},this.publico.getNuevoRol=function(){simpleAjax.send({element:"#CRDCRbtnNew",dataType:"html",root:t.config.modulo+"getNuevoRol",fnCallback:function(t){$("#cont-modal").append(t),$("#CRDCRformNuevoRol").modal("show"),configurarRolesScript.validateRol({form:"#CRDCRformNuevoRol",evento:"configurarRoles.postRol()"})}})},this.publico.getRol=function(){t.idRol=simpleScript.getParam(arguments[0]),simpleAjax.send({dataType:"html",gifProcess:!0,data:"&_key="+t.idRol,root:t.config.modulo+"getEditRol",fnCallback:function(t){$("#cont-modal").append(t),$("#CRDCRformEditRol").modal("show"),configurarRolesScript.validateRol({form:"#CRDCRformEditRol",evento:"configurarRoles.postEditRol()"})}})},this.publico.getAccesos=function(){t.idRol=simpleScript.getParam(arguments[0]);var o=simpleScript.getParam(arguments[1]);simpleAjax.send({dataType:"html",gifProcess:!0,data:"&_key="+t.idRol,root:t.config.modulo+"getAccesos",fnCallback:function(t){$("#cont-modal").append(t),$("#CRDCRformAccesos").modal("show"),$("#cont-rol").html(o)}})},this.publico.getAccionesRolOpcion=function(){var o=simpleScript.getParam(arguments[0]),e=simpleScript.getParam(arguments[1]),i=$(simpleScript.getParam(arguments[2])).data("tt");simpleAjax.send({dataType:"html",element:"#btn_"+o,abort:!1,data:"&_rolOpcion="+e+"&_tt="+i,root:t.config.modulo+"getOpcionRolAxions",fnCallback:function(t){$(".accionesOpcion-cont").fadeOut(),$("#cont-acciones"+o).html(t),$("#cont-acciones"+o).fadeIn()}})},this.publico.postRol=function(){simpleAjax.send({flag:1,element:"#CRDCRbtnGrabaRol",root:t.config.modulo+"postRol",form:"#CRDCRformNuevoRol",clear:!0,fnCallback:function(t){isNaN(t.result)||1!==parseInt(t.result)?isNaN(t.result)||2!==parseInt(t.result)||simpleScript.notify.error({content:lang.mensajes.MSG_4}):simpleScript.notify.ok({content:lang.mensajes.MSG_3,callback:function(){configurarRoles.getGridRoles()}})}})},this.publico.postEditRol=function(){simpleAjax.send({flag:3,element:"#CRDCRbtnEditaRol",root:t.config.modulo+"postRol",form:"#CRDCRformEditRol",data:"&_key="+t.idRol,clear:!0,fnCallback:function(t){isNaN(t.result)||1!==parseInt(t.result)?isNaN(t.result)||2!==parseInt(t.result)||simpleScript.notify.error({content:lang.mensajes.MSG_4}):simpleScript.notify.ok({content:lang.mensajes.MSG_3,callback:function(){configurarRoles.getGridRoles(),simpleScript.reloadGrid("#gridRoles"),simpleScript.closeModal("#CRDCRformEditRol")}})}})},this.publico.postDeleteRol=function(){t.idRol=simpleScript.getParam(arguments[0]),simpleScript.notify.confirm({content:lang.mensajes.MSG_5,callbackSI:function(){simpleAjax.send({flag:2,gifProcess:!0,data:"&_key="+t.idRol,root:t.config.modulo+"postDeleteRol",fnCallback:function(t){isNaN(t.result)||1!==parseInt(t.result)||simpleScript.notify.ok({content:lang.mensajes.MSG_6,callback:function(){configurarRoles.getGridRoles()}})}})}})},this.publico.postOpcion=function(){var o=simpleScript.getParam(arguments[0]),e=simpleScript.getParam(arguments[1]),i=simpleScript.getParam(arguments[2]),n=simpleScript.getParam(arguments[3]);simpleAjax.send({flag:e,gifProcess:!0,root:t.config.modulo+"postOpcion",data:"&_key="+i+"&_opcion="+n,fnCallback:function(t){var e="#btn_"+simpleAjax.stringGet(i)+simpleAjax.stringGet(n);if(isNaN(t.result)||1!==parseInt(t.result))isNaN(t.result)||2!==parseInt(t.result)?isNaN(t.result)||3!==parseInt(t.result)||($(e).attr("disabled",!0).removeAttr("onclick"),$(e).off("click"),$(o).attr("onclick",""),simpleScript.setEvent.click({element:o,event:"configurarRoles.postOpcion(this,4,'"+i+"','"+n+"')"}),simpleScript.notify.ok({content:lang.mensajes.MSG_6}),$("#cont-acciones"+simpleAjax.stringGet(i)+simpleAjax.stringGet(n)).html("")):simpleScript.notify.error({content:lang.mensajes.MSG_4});else{var l=simpleAjax.stringGet(i)+simpleAjax.stringGet(n),a=simpleAjax.stringPost(t.id_rolopciones);$(e).attr("disabled",!1),simpleScript.setEvent.click({element:e,event:"configurarRoles.getAccionesRolOpcion('"+l+"','"+a+"','"+e+"');"}),$(o).attr("onclick",""),simpleScript.setEvent.click({element:o,event:"configurarRoles.postOpcion(this,5,'"+i+"','"+n+"')"}),simpleScript.notify.ok({content:lang.mensajes.MSG_3})}}})},this.publico.postAccionOpcionRol=function(){var o=simpleScript.getParam(arguments[0]),e=simpleScript.getParam(arguments[1]),i=simpleScript.getParam(arguments[2]);simpleAjax.send({flag:o,gifProcess:!0,abort:!1,root:t.config.modulo+"postAccionOpcionRol",data:"&_accion="+i+"&_opcion="+e,fnCallback:function(t){isNaN(t.result)||1!==parseInt(t.result)?isNaN(t.result)||3!==parseInt(t.result)||simpleScript.notify.ok({content:lang.mensajes.MSG_6}):simpleScript.notify.ok({content:lang.mensajes.MSG_3})}})},this.publico.postDuplicarRol=function(o,e){simpleAjax.send({element:o,root:t.config.modulo+"postDuplicarRol",data:"&_key="+e,fnCallback:function(t){isNaN(t.result)||1!==parseInt(t.result)||simpleScript.notify.ok({content:lang.accion.PUBROL,callback:function(){configurarRoles.getGridRoles()}})}})},this.publico},configurarRoles=new configurarRoles_;